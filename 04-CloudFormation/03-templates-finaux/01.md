Voici les **√©tapes simples et claires** pour ex√©cuter l‚Äôatelier guid√© avec les **3 templates CloudFormation** (`lab-network.yaml`, `lab-application.yaml`, `lab-application2.yaml`) ‚Äî **sans oublier S3**, et avec **les bonnes commandes AWS CLI**.

---

## ‚úÖ **Pr√©requis**

* Avoir un compte AWS avec droits CloudFormation/EC2/VPC/S3
* Installer et configurer AWS CLI :

  ```bash
  aws configure
  ```

---

## üìÅ √âtape 0 : Cr√©er un bucket S3 (si tu veux utiliser `--template-url`)

```bash
aws s3 mb s3://mon-bucket-lab-cfn
```

Puis envoyer les fichiers YAML :

```bash
aws s3 cp lab-network.yaml s3://mon-bucket-lab-cfn/
aws s3 cp lab-application.yaml s3://mon-bucket-lab-cfn/
aws s3 cp lab-application2.yaml s3://mon-bucket-lab-cfn/
```

Sinon, tu peux utiliser les fichiers locaux (`file://...`) directement, sans S3.

---

## üß± √âtape 1 : D√©ployer la couche r√©seau

### ‚û§ Version locale :

```bash
aws cloudformation create-stack \
  --stack-name lab-network \
  --template-body file://lab-network.yaml \
  --capabilities CAPABILITY_NAMED_IAM
```

### ‚û§ Ou version S3 :

```bash
aws cloudformation create-stack \
  --stack-name lab-network \
  --template-url https://s3.amazonaws.com/mon-bucket-lab-cfn/lab-network.yaml \
  --capabilities CAPABILITY_NAMED_IAM
```

---

## üíª √âtape 2 : D√©ployer la couche application

### ‚û§ Avec le premier template (HTTP uniquement)

```bash
aws cloudformation create-stack \
  --stack-name lab-application \
  --template-body file://lab-application.yaml \
  --parameters ParameterKey=NetworkStackName,ParameterValue=lab-network \
  --capabilities CAPABILITY_NAMED_IAM
```

---

## üîÅ √âtape 3 : Mise √† jour de la pile application (ajout SSH)

```bash
aws cloudformation update-stack \
  --stack-name lab-application \
  --template-body file://lab-application2.yaml \
  --parameters ParameterKey=NetworkStackName,ParameterValue=lab-network \
  --capabilities CAPABILITY_NAMED_IAM
```

---

## üì¶ √âtape 4 : Supprimer la pile application

```bash
aws cloudformation delete-stack --stack-name lab-application
```

Tu pourras ensuite aller v√©rifier que l‚Äô**instantan√© EBS** a √©t√© cr√©√© (si tu ajoutes un `Volume` avec `DeletionPolicy: Snapshot`).

---

## üìê √âtape 5 (optionnelle) : Explorer le mod√®le avec **CloudFormation Designer**

1. Va dans AWS Console > CloudFormation > **Designer**
2. Clique sur **Ouvrir > Fichier local** et s√©lectionne `lab-network.yaml` ou `lab-application2.yaml`
3. Observe la visualisation graphique du mod√®le

---

Souhaites-tu un script `.sh` pour automatiser tout cela avec pause entre chaque √©tape ?
